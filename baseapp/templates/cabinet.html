{% extends 'base.html' %}{% load static %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static "ba-css/cabinet.css" %}">
{% endblock %}

{% block title %}Личный кабинет{% endblock %}

{% block content %}
    <div class="container-fluid d-block d-lg-none flex-grow-1">
    <div class="row">
        <div class="col-md-12 mt-4">
            <img src="{% static "userconfig.png" %}" alt="settings" class="img-thumbnail">
                <h1 class="display-4 page-title">Настройки</h1>
                  <div class="form mt-4">
                      <form action="" method="post"> {% csrf_token %} {{ form.non_field_errors }}
                      {% for field in form %}
                          <div class="form-label-title">{{ field.label_tag }}</div> {{ field }} {{ field.errors }}
                      {% endfor %}
                      <div class="row justify-content-center">
                          <div class="col-auto form-button">
                              <button type="submit" class="btn btn-success mt-3" id="apply_button">Сохранить данные</button>
                          </div>
                      </div>
                  </form>
                  </div>
            </div>
             <div class="col-12 mt-4">
                <img src="{% static "order.png" %}" alt="settings" class="img-thumbnail m-2">
                <h1 class="display-4 page-title">Ваши заказы</h1>
                <p class="lead m-2 page-description">Панель управления заказами пользователя</p>
                <hr>
                  <button type="button" class="btn btn-info mb-3">
                          Все заказы <span class="badge badge-dark">0</span>
                  </button>
                  <table class="table table-striped table-bordered">
                      <thead class="thead-dark text-center">
                        <tr>
                          <th scope="col">Дата</th>
                          <th scope="col" class="d-none d-sm-table-cell">Адрес</th>
                          <th scope="col" class="d-none d-sm-table-cell">Статус</th>
                          <th scope="col">Сумма</th>
                          <th scope="col">Товары</th>
                        </tr>
                      </thead>
                    <tbody>
                        {% for i in user.basket_set.all %}
                        <tr>
                          <td>{{i.date}}</td>
                          <td class="d-none d-sm-table-cell">{{i.address}}</td>
                          <td class="d-none d-sm-table-cell">{{i.status}}</td>
                          <td>{{i.sum_price}}</td>
                          <td>{{i.singleorder_set.all|join:", "}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="container mt-5 d-none d-lg-block flex-grow-1">
        <div class="row">
          <div class="col-3 text-center">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
              <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">
                  Настройки
              </a>
              <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">
                  Список заказов
              </a>
            </div>
          </div>
          <div class="col-9">
            <div class="tab-content" id="v-pills-tabContent">
              <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                <img src="{% static "userconfig.png" %}" alt="settings" class="img-thumbnail">
                <h1 class="display-4 page-title">Настройки</h1>
                  <div class="form mt-4">
                      <form action="" method="post"> {% csrf_token %} {{ form.non_field_errors }}
                      {% for field in form %}
                          <div class="form-label-title">{{ field.label_tag }}</div> {{ field }} {{ field.errors }}
                      {% endfor %}
                      <div class="row justify-content-center">
                          <div class="col-auto form-button">
                              <button type="submit" class="btn btn-success mt-3" id="apply_button">Сохранить данные</button>
                          </div>
                      </div>
                  </form>
                  </div>
              </div>
              <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                <img src="{% static "order.png" %}" alt="settings" class="img-thumbnail m-2">
                <h1 class="display-4 page-title">Ваши заказы</h1>
                <p class="lead m-2 page-description">Панель управления заказами пользователя</p>
                <hr>
                  <button type="button" class="btn btn-info mb-3">
                          Все заказы <span class="badge badge-dark">0</span>
                  </button>
                  <table class="table table-striped table-bordered">
          <thead class="thead-dark text-center">
            <tr>
              <th scope="col">Дата</th>
              <th scope="col">Адрес</th>
              <th scope="col">Статус</th>
              <th scope="col">Сумма</th>
              <th scope="col">Товары</th>
            </tr>
          </thead>
        <tbody class="text-center">
            {% for i in user.basket_set.all %}
            <tr>
              <td class="text-data">{{i.date}}</td>
              <td>{{i.address}}</td>
              <td>{{i.get_status_display}}</td>
              <td>{{i.sum_price}}</td>
              <td>{{i.singleorder_set.all|join:", "}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
              </div>
            </div>
          </div>
        </div>
    </div>


{% endblock content %}